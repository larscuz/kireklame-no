import type { NorskPromptingRule } from "./types";

function rule(ruleData: NorskPromptingRule): NorskPromptingRule {
  return ruleData;
}

export const norskPromptingRules: NorskPromptingRule[] = [
  rule({
    id: "konsistens-identitetslas",
    name: "Identitetslås",
    category: "Konsistens",
    severity: 5,
    description: "Lås person, objekt og nøkkelattributter eksplisitt slik at modellen ikke bytter identitet mellom frames.",
    appliesTo: "all",
    addToPrompt: "Hold identitet konstant: samme ansiktstrekk, samme klær, samme objektproposjoner i hele outputen.",
    negativeAdd: "Ingen ansiktsbytte, ingen endring av klær, ingen tilfeldig objektbytte.",
  }),
  rule({
    id: "konsistens-scenelas",
    name: "Scenelås",
    category: "Konsistens",
    severity: 4,
    description: "Beskriv hvilke elementer i miljøet som ikke skal flytte seg eller mutere.",
    appliesTo: "all",
    addToPrompt: "Lås miljøet: behold arkitektur, møblering og bakgrunnsstruktur uten transformasjon.",
    negativeAdd: "Ingen nye bygg, ingen teleportering av objekter, ingen romendring.",
  }),
  rule({
    id: "kontinuitet-objektpermanens",
    name: "Objektpermanens",
    category: "Kontinuitet",
    severity: 5,
    description: "Objekter som introduseres skal bestå gjennom hele sekvensen med samme egenskaper.",
    appliesTo: "video",
    addToPrompt: "Objekter beholder størrelse, form og plassering relativt til scenen gjennom hele tidslinjen.",
    negativeAdd: "Ingen forsvinning av objekter, ingen magisk duplisering.",
  }),
  rule({
    id: "kontinuitet-first-last",
    name: "First/Last-forankring",
    category: "Kontinuitet",
    severity: 4,
    description: "For video: sett eksplisitt starttilstand og slutt-tilstand med fysisk plausibel overgang.",
    appliesTo: "video",
    addToPrompt: "Definer startbilde og sluttbilde med en logisk overgang uten nye elementer.",
    negativeAdd: "Ingen hoppekutt i fysikk, ingen uforklarte endringer mellom start og slutt.",
  }),
  rule({
    id: "kamera-brennvidde",
    name: "Brennvidde må defineres",
    category: "Kamera",
    severity: 4,
    description: "Fast brennvidde reduserer tolkning og holder perspektiv stabilt.",
    appliesTo: "image",
    addToPrompt: "Bruk eksplisitt brennvidde (f.eks. 24mm, 35mm, 50mm, 85mm) og hold den konstant.",
    negativeAdd: "Ingen tilfeldig zoom-lignende perspektivskift.",
  }),
  rule({
    id: "kamera-bevegelsesregel",
    name: "Kamerabevegelse som regel",
    category: "Kamera",
    severity: 4,
    description: "I video må kameraoppførsel være en regel, ikke en stemningsidé.",
    appliesTo: "video",
    addToPrompt: "Definer én kamerabevegelse med tempo: dolly, pan eller locked-off.",
    negativeAdd: "Ingen rykkvis kombinasjon av flere kamerabevegelser i samme shot.",
  }),
  rule({
    id: "kamera-pov",
    name: "POV må være eksplisitt",
    category: "Kamera",
    severity: 3,
    description: "Spesifiser synsvinkel for å unngå uforutsigbar framing.",
    appliesTo: "all",
    addToPrompt: "Sett POV eksplisitt: frontalt, over skulder, fugleperspektiv eller øyehøyde.",
    negativeAdd: "Ingen hopp mellom inkompatible POV-er.",
  }),
  rule({
    id: "komposisjon-lagdeling",
    name: "Tre-lags komposisjon",
    category: "Komposisjon",
    severity: 3,
    description: "Definer forgrunn, mellomgrunn og bakgrunn for å styre lesbarhet.",
    appliesTo: "image",
    addToPrompt: "Komponér med tydelig forgrunn, mellomgrunn og bakgrunn.",
    negativeAdd: "Ingen flat komposisjon uten dybde.",
  }),
  rule({
    id: "komposisjon-ledende-linjer",
    name: "Ledende linjer",
    category: "Komposisjon",
    severity: 2,
    description: "Bruk linjeføring for å styre blikket mot motivet.",
    appliesTo: "image",
    addToPrompt: "Bruk ledende linjer mot hovedmotiv og behold balanse i negativt rom.",
    negativeAdd: "Ingen tilfeldige linjer som peker ut av motiv.",
  }),
  rule({
    id: "komposisjon-tredjedelsregel",
    name: "Tredjedelsregel",
    category: "Komposisjon",
    severity: 2,
    description: "Plasser fokuspunkt i kryss for bedre visuell kontroll.",
    appliesTo: "all",
    addToPrompt: "Plasser hovedmotiv nær tredjedelslinjene med kontrollert headroom.",
    negativeAdd: "Unngå sentrering uten grunn.",
  }),
  rule({
    id: "realisme-fysisk-lys",
    name: "Lys må beskrives fysisk",
    category: "Lys",
    severity: 5,
    description: "Lysbeskrivelse med retning, type og temperatur gir stabil realisme.",
    appliesTo: "all",
    addToPrompt: "Definer key/fill/rim med retning, diffusjon og fargetemperatur.",
    negativeAdd: "Ingen diffuse ord som 'episk lys' uten fysisk kilde.",
  }),
  rule({
    id: "realisme-materialrespons",
    name: "Materialrespons",
    category: "Realisme",
    severity: 4,
    description: "Materialer må ha troverdig overflaterespons, særlig i produkt og arkitektur.",
    appliesTo: "image",
    addToPrompt: "Beskriv materialitet: ruhet, glans, reflektivitet og mikrostruktur.",
    negativeAdd: "Ingen plastisk hud eller metall uten korrekt refleks.",
  }),
  rule({
    id: "realisme-tyngdekraft",
    name: "Tyngdekraft og masse",
    category: "Fysikk",
    severity: 5,
    description: "Objekter og kropper må følge tyngdekraft og realistisk masse.",
    appliesTo: "all",
    addToPrompt: "Bevegelse følger tyngdekraft, treghet og realistisk kontakt med underlag.",
    negativeAdd: "Ingen svevende objekter uten eksplisitt årsak.",
  }),
  rule({
    id: "fysikk-regnlogikk",
    name: "Regnlogikk",
    category: "Fysikk",
    severity: 4,
    description: "Nedbør skal følge scenegeometri, lyskilder og vindforhold.",
    appliesTo: "all",
    addToPrompt: "Regn vises kun der fysisk mulig og påvirker overflater konsistent.",
    negativeAdd: "Ingen regn gjennom tak eller tørre reflekser i våte soner.",
  }),
  rule({
    id: "fysikk-refleksjon-vinkel",
    name: "Refleksjonsvinkel",
    category: "Fysikk",
    severity: 5,
    description: "Refleksjon i vann/glass må være perspektiv- og kildekorrekt.",
    appliesTo: "all",
    addToPrompt: "Refleksjoner følger innfallsvinkel og viser kun synlige objekter fra riktig geometri.",
    negativeAdd: "Ingen dobbel refleksjon uten fysisk kilde.",
  }),
  rule({
    id: "historisk-epokekontroll",
    name: "Epokekontroll",
    category: "Historisk troverdighet",
    severity: 4,
    description: "Historiske scener må låse periode, materialer og rekvisitter.",
    appliesTo: "all",
    addToPrompt: "Lås årstall, epoke, materialbruk og tidsriktige objekter.",
    negativeAdd: "Ingen anakronismer eller moderne detaljer i historisk scene.",
  }),
  rule({
    id: "historisk-kontekst",
    name: "Historisk kontekst",
    category: "Historisk troverdighet",
    severity: 3,
    description: "Kontekst må inkludere sosialt, arkitektonisk og teknologisk nivå.",
    appliesTo: "all",
    addToPrompt: "Beskriv historisk kontekst: bymiljø, klær, teknologi og språkbruk.",
    negativeAdd: "Ingen tidsblanding uten eksplisitt kreativt valg.",
  }),
  rule({
    id: "tekst-i-bilde-advarsel",
    name: "Tekst i bilde er risikosone",
    category: "Tekst i bilde",
    severity: 4,
    description: "Generative modeller håndterer tekst i bilde svakt; bruk restriksjoner eller separat grafikk.",
    appliesTo: "image",
    addToPrompt: "Begrens tekst i bilde til store, enkle ord eller planlegg tekst som separat layer.",
    negativeAdd: "Ingen kompleks småtekst i motivet.",
  }),
  rule({
    id: "tekst-lesbar-hierarki",
    name: "Teksthierarki",
    category: "Tekst i bilde",
    severity: 3,
    description: "Hvis tekst må med: styr kontrast, størrelse og plassering.",
    appliesTo: "image",
    addToPrompt: "Hold tekst kort, høy kontrast og tydelig plassering med frisoner.",
    negativeAdd: "Ingen tekst som kolliderer med ansikt eller produkt.",
  }),
  rule({
    id: "produksjon-fremdrift",
    name: "Produksjonsrekkefølge",
    category: "Produksjonslogikk",
    severity: 3,
    description: "Definer shot-rekkefølge eller leveranserekkefølge for reproduksjon.",
    appliesTo: "video",
    addToPrompt: "Beskriv rekkefølge: etablering, handling, payoff, CTA.",
    negativeAdd: "Ingen tilfeldig klippstruktur uten dramaturgisk funksjon.",
  }),
  rule({
    id: "produksjon-ingen-magi",
    name: "Ingen magisk transformasjon",
    category: "Produksjonslogikk",
    severity: 4,
    description: "Profesjonelle produksjoner krever fysikalsk eller narrativ begrunnelse for endring.",
    appliesTo: "all",
    addToPrompt: "Alle transformasjoner må ha tydelig fysisk eller narrativ årsak.",
    negativeAdd: "Ingen magiske morphs uten definert overgangsmekanikk.",
  }),
  rule({
    id: "kamera-shutter-fps",
    name: "Shutter/FPS-samsvar",
    category: "Kamera",
    severity: 3,
    description: "Video bør definere fps og lukkerelasjon for realistisk motion rendering.",
    appliesTo: "video",
    addToPrompt: "Definer fps og lukkerlogikk (f.eks. 24fps med naturlig motion blur eller 1/500 for frys).",
    negativeAdd: "Ingen motstridende blur-regler i samme shot.",
  }),
  rule({
    id: "kamera-akseregel",
    name: "180-gradersregel",
    category: "Kamera",
    severity: 3,
    description: "Hold aksen i dialog og handlingsscener for orientering.",
    appliesTo: "video",
    addToPrompt: "Behold romlig akse (180-gradersregel) gjennom sekvensen.",
    negativeAdd: "Ingen uforklarte aksesprang.",
  }),
  rule({
    id: "komposisjon-horisont",
    name: "Horisontkontroll",
    category: "Komposisjon",
    severity: 2,
    description: "Horisont må være bevisst for å unngå utilsiktet skjevhet.",
    appliesTo: "image",
    addToPrompt: "Hold horisontnivå stabilt med bevisst tilt bare ved dramaturgisk behov.",
    negativeAdd: "Ingen tilfeldig nederlandsk vinkel.",
  }),
  rule({
    id: "lys-primarkilde",
    name: "Primærlyskilde",
    category: "Lys",
    severity: 4,
    description: "Definer tydelig primærlyskilde før estetiske valg.",
    appliesTo: "all",
    addToPrompt: "Én tydelig primærlyskilde med sekundære kilder som støtte.",
    negativeAdd: "Ingen motstridende skygger fra ukjente kilder.",
  }),
  rule({
    id: "lys-fargetemperatur",
    name: "Fargetemperaturkontroll",
    category: "Lys",
    severity: 3,
    description: "Konsistent Kelvin-område gir mer troverdig fargebalanse.",
    appliesTo: "all",
    addToPrompt: "Sett Kelvin-spenn for lyskilder og hold hvitbalanse konsistent.",
    negativeAdd: "Ingen tilfeldig blanding av kaldt/varmt uten motivasjon.",
  }),
  rule({
    id: "realisme-hudtekstur",
    name: "Hudtekstur uten AI-look",
    category: "Realisme",
    severity: 4,
    description: "Presis hudtekstur hindrer plastisk rendering.",
    appliesTo: "image",
    addToPrompt: "Hud skal ha naturlig porer, mikrovariasjon og realistisk subsurface scattering.",
    negativeAdd: "Ingen glatt plastikkhud eller overretusj.",
  }),
  rule({
    id: "realisme-objektproporsjon",
    name: "Proporsjonslås",
    category: "Realisme",
    severity: 4,
    description: "Lås størrelseforhold for viktige objekter.",
    appliesTo: "all",
    addToPrompt: "Objektproporsjoner skal være konsistente mot menneskelig skala og miljø.",
    negativeAdd: "Ingen skalahopp mellom frames eller varianter.",
  }),
  rule({
    id: "konsistens-fargepalett",
    name: "Fargepalettlås",
    category: "Konsistens",
    severity: 3,
    description: "Definer palett for å unngå tilfeldig tonehopp.",
    appliesTo: "all",
    addToPrompt: "Hold en kontrollert palett med primær- og støttefarger.",
    negativeAdd: "Ingen tilfeldig metningssprang mellom outputs.",
  }),
  rule({
    id: "kontinuitet-kostyme",
    name: "Kostyme-kontinuitet",
    category: "Kontinuitet",
    severity: 3,
    description: "Kostyme og rekvisitt må følge kontinuitetslinjen.",
    appliesTo: "video",
    addToPrompt: "Behold kostyme, tilbehør og rekvisitt-posisjon gjennom sekvensen.",
    negativeAdd: "Ingen tilfeldige kostymeskift.",
  }),
  rule({
    id: "fysikk-kollisjon",
    name: "Kontakt og kollisjon",
    category: "Fysikk",
    severity: 4,
    description: "Kropp og objekter skal interagere med korrekt kontaktpunkt.",
    appliesTo: "all",
    addToPrompt: "Kollisjon og kontaktflater skal gi realistisk kompresjon og bevegelsesrespons.",
    negativeAdd: "Ingen clipping gjennom objekter eller gulv.",
  }),
  rule({
    id: "fysikk-temporal-koherens",
    name: "Temporal koherens",
    category: "Fysikk",
    severity: 5,
    description: "Bevegelse over tid må være jevn og fysisk plausibel.",
    appliesTo: "video",
    addToPrompt: "Hold temporal koherens: jevn bevegelse, stabile konturer, ingen frame-flimmer.",
    negativeAdd: "Ingen jitter, popping eller ulogiske re-timings.",
  }),
  rule({
    id: "produksjon-briefformat",
    name: "Briefformat",
    category: "Produksjonslogikk",
    severity: 2,
    description: "Prompt bør følge tydelig seksjonsstruktur for samarbeid.",
    appliesTo: "all",
    addToPrompt: "Bruk seksjoner: mål, motiv, miljø, kamera, lys, constraints, negativ liste.",
    negativeAdd: "Ingen ustrukturert tekstblokk uten seksjoner.",
  }),
  rule({
    id: "produksjon-versjonering",
    name: "Versjonerbar prompting",
    category: "Produksjonslogikk",
    severity: 2,
    description: "Beskriv hva som er fast og hva som er variabelt for A/B-iterasjon.",
    appliesTo: "all",
    addToPrompt: "Marker faste parametere og variable parametere for testsyklus.",
    negativeAdd: "Ingen full tilfeldig regenerering mellom versjoner.",
  }),
  rule({
    id: "tekst-klar-rolle",
    name: "Klar rolle i tekstprompt",
    category: "Produksjonslogikk",
    severity: 3,
    description: "For tekstoutput må rolle, målgruppe og format være eksplisitt.",
    appliesTo: "text",
    addToPrompt: "Definer rolle, målgruppe, tone, lengde og leveranseformat i første linje.",
    negativeAdd: "Ingen generisk tekst uten målgruppe.",
  }),
  rule({
    id: "tekst-terminologikontroll",
    name: "Terminologikontroll",
    category: "Konsistens",
    severity: 3,
    description: "Hold begrepsbruk stabil i fagtekst og manus.",
    appliesTo: "text",
    addToPrompt: "Bruk samme nøkkelbegreper konsekvent gjennom hele teksten.",
    negativeAdd: "Ingen tilfeldig synonymbytte som endrer mening.",
  }),
  rule({
    id: "komposisjon-fokuspunkt",
    name: "Ett hovedfokus",
    category: "Komposisjon",
    severity: 3,
    description: "Definer ett primært fokuspunkt for bedre lesbarhet.",
    appliesTo: "all",
    addToPrompt: "Prioriter ett hovedfokus med sekundære elementer som støtte.",
    negativeAdd: "Ingen konkurrerende hovedmotiver.",
  }),
  rule({
    id: "kamera-dybdeskarphet",
    name: "Dybdeskarphet med hensikt",
    category: "Kamera",
    severity: 3,
    description: "Apertur og fokusplan bør velges ut fra fortellingsmål.",
    appliesTo: "all",
    addToPrompt: "Definer fokusplan og dybdeskarphet (f.eks. f/4 naturlig, f/1.8 selektivt).",
    negativeAdd: "Ingen tilfeldig ekstrem blur uten narrativ grunn.",
  }),
  rule({
    id: "lys-kontrastkontroll",
    name: "Kontrastkontroll",
    category: "Lys",
    severity: 3,
    description: "Kontrastnivå skal støtte motiv og ikke ødelegge detalj.",
    appliesTo: "all",
    addToPrompt: "Hold kontrollerte highlight- og shadow-nivåer med bevart detaljinformasjon.",
    negativeAdd: "Ingen utbrente highlights eller knuste skygger uten bevisst valg.",
  }),
  rule({
    id: "realisme-ansiktsanatomi",
    name: "Ansiktsanatomi",
    category: "Realisme",
    severity: 4,
    description: "Ansiktsmimikk og muskelspenning må være fysisk troverdig.",
    appliesTo: "all",
    addToPrompt: "Beskriv naturlig ansiktsmimikk, muskelspenning og blikkretning.",
    negativeAdd: "Ingen deformerte ansiktstrekk eller asymmetri uten grunn.",
  }),
  rule({
    id: "historisk-materialpalett",
    name: "Historisk materialpalett",
    category: "Historisk troverdighet",
    severity: 3,
    description: "Materialvalg må matche periode og geografi.",
    appliesTo: "all",
    addToPrompt: "Bruk tidsriktige materialer, tekstiler og bygningsteknikker for epoken.",
    negativeAdd: "Ingen moderne polymerer/metaller i før-industriell scene.",
  }),
  rule({
    id: "fysikk-vindretning",
    name: "Vindretning og partikler",
    category: "Fysikk",
    severity: 2,
    description: "Partikler, regn og klær må følge samme vindlogikk.",
    appliesTo: "all",
    addToPrompt: "Partikler og tekstiler følger samme vindretning og intensitet.",
    negativeAdd: "Ingen motstridende partikkelretninger.",
  }),
  rule({
    id: "produksjon-qa-sjekk",
    name: "QA-sjekk før eksport",
    category: "Produksjonslogikk",
    severity: 2,
    description: "Legg inn en eksplisitt sjekk av feilpunkter i prompten.",
    appliesTo: "all",
    addToPrompt: "Kjør kvalitetssjekk for tekstfeil, perspektivfeil og kontinuitetsbrudd før final output.",
    negativeAdd: "Ingen final uten QA-punkter.",
  }),
  rule({
    id: "konsistens-seedstrategi",
    name: "Seed-strategi",
    category: "Konsistens",
    severity: 2,
    description: "Når verktøy støtter seed: bruk seed for reproduksjon.",
    appliesTo: "all",
    addToPrompt: "Hold seed konstant ved sammenligning og endre kun én parameter per iterasjon.",
    negativeAdd: "Ingen tilfeldig seed-endring mellom A/B-varianter.",
  }),
  rule({
    id: "kontinuitet-lys-over-tid",
    name: "Lyskontinuitet",
    category: "Kontinuitet",
    severity: 3,
    description: "Lysretning og eksponering må være konsistent over tid.",
    appliesTo: "video",
    addToPrompt: "Hold lysretning, intensitet og eksponering stabil gjennom sekvensen.",
    negativeAdd: "Ingen tilfeldig dag/natt-skift i samme scene.",
  }),
  rule({
    id: "realisme-mikrobevegelse",
    name: "Mikrobevegelse",
    category: "Realisme",
    severity: 2,
    description: "Små kroppslige bevegelser øker troverdighet i video.",
    appliesTo: "video",
    addToPrompt: "Inkluder subtile mikrobevegelser som pust, blunking og naturlig vektforskyvning.",
    negativeAdd: "Ingen stiv mannequin-bevegelse.",
  }),
  rule({
    id: "kamera-shotintensjon",
    name: "Shot-intensjon",
    category: "Kamera",
    severity: 2,
    description: "Hvert shot må ha tydelig funksjon i fortellingen.",
    appliesTo: "video",
    addToPrompt: "Beskriv shot-intensjon: etablering, informasjon, emosjon eller payoff.",
    negativeAdd: "Ingen dekorative shots uten funksjon.",
  }),
];

export const rulesById = Object.fromEntries(
  norskPromptingRules.map((entry) => [entry.id, entry])
);

export const ruleCategories = Array.from(
  new Set(norskPromptingRules.map((entry) => entry.category))
);
